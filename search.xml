<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>mysql -基于Gtid的主从复制</title>
      <link href="/2021/09/20/mysql-ji-yu-gtid-de-zhu-cong-fu-zhi/"/>
      <url>/2021/09/20/mysql-ji-yu-gtid-de-zhu-cong-fu-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="主从复制原理图"><a href="#主从复制原理图" class="headerlink" title="主从复制原理图"></a>主从复制原理图</h2><p><img src="../images/91267b08272fb28f5808438391fd7268.png" alt="主从复制实验原理图"></p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>①<br>准备两台服务器，都开启mysql服务<br>    尽量两台服务器的数据库版本一致</p><p>②<br>msater服务器开启二进制日志<br>master服务器和slave服务器的server_id不能相同，必须<code>唯一</code></p><h1 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1><h2 id="master配置"><a href="#master配置" class="headerlink" title="master配置"></a>master配置</h2><h6 id="1-修改mysql配置文件"><a href="#1-修改mysql配置文件" class="headerlink" title="1.修改mysql配置文件"></a>1.修改mysql配置文件</h6><ul><li>开启二进制日志</li><li>配置server_id</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure><p>修改如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">socket=/data/mysql/mysql.sock</span><br><span class="line">port = 3306</span><br><span class="line">open_files_limit = 8192</span><br><span class="line">innodb_buffer_pool_size = 512M</span><br><span class="line">character-set-server=utf8</span><br><span class="line">slow_query_log=1</span><br><span class="line">long_query_time = 0.001</span><br><span class="line">general_log</span><br><span class="line">log_bin</span><br><span class="line"><span class="comment"># 服务器的编号</span></span><br><span class="line">server_id = 1</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="../images/88f63f6912c80d35ad211018ba9a8a34.png"></p><h6 id="2-创建用来复制二进制日志的用户"><a href="#2-创建用来复制二进制日志的用户" class="headerlink" title="2.创建用来复制二进制日志的用户"></a>2.创建用来复制二进制日志的用户</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;create user <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;192.168.186.138&#x27;</span> identified by <span class="string">&#x27;wp123456&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (1.05 sec)</span><br></pre></td></tr></table></figure><h6 id="3-授权-授权获取二进制日志的权限"><a href="#3-授权-授权获取二进制日志的权限" class="headerlink" title="3.授权 - - - 授权获取二进制日志的权限"></a>3.授权 - - - 授权获取二进制日志的权限</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@(none) 12:33  mysql&gt;grant replication slave on *.* to <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;192.168.186.138&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><h6 id="4-创建完全备份"><a href="#4-创建完全备份" class="headerlink" title="4.创建完全备份"></a>4.创建完全备份</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># mysqldump -uroot -p&#x27;wp123456&#x27; --all-databases &gt;/backup/all.sql</span></span><br><span class="line">mysqldump: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br></pre></td></tr></table></figure><h6 id="5-将完全备份传输到slave机器上"><a href="#5-将完全备份传输到slave机器上" class="headerlink" title="5.将完全备份传输到slave机器上"></a>5.将完全备份传输到slave机器上</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># scp /backup/all.sql root@192.168.186.138:/root</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.186.138 (192.168.186.138)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:0aDD3cub4HOR1gWHbgqPRYCLydWdpE0F1FljaTnQ+fc.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:8f:8c:72:87:9d:3a:d6:40:5a:c3:35:11:96:af:af:05.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>192.168.186.138<span class="string">&#x27; (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">root@192.168.186.136&#x27;</span>s password: </span><br><span class="line">all.sql                                                                                                    100%  887KB  16.8MB/s   00:00</span><br></pre></td></tr></table></figure><h6 id="6-在master上关闭防火墙和selinux"><a href="#6-在master上关闭防火墙和selinux" class="headerlink" title="6.在master上关闭防火墙和selinux"></a>6.在master上关闭防火墙和selinux</h6><ul><li>关闭防火墙<br>&nbsp;&nbsp;&nbsp;临时关闭<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service firewalld stop</span><br></pre></td></tr></table></figure>&nbsp;&nbsp;&nbsp;永久关闭<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@localhost</span> backup]# systemctl disable firewalld</span><br></pre></td></tr></table></figure></li><li>关闭selinux</li></ul><p>&nbsp;&nbsp;&nbsp;临时关闭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> enforcing 0</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;永久关闭</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@localhost</span> backup]# vim <span class="operator">/</span>etc<span class="operator">/</span>selinux<span class="operator">/</span>config</span><br></pre></td></tr></table></figure><h2 id="slave配置"><a href="#slave配置" class="headerlink" title="slave配置"></a>slave配置</h2><h6 id="1-修改mysql配置文件-1"><a href="#1-修改mysql配置文件-1" class="headerlink" title="1.修改mysql配置文件"></a>1.修改mysql配置文件</h6><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">socket=/data/mysql/mysql.sock</span><br><span class="line">port = 3306</span><br><span class="line">open_files_limit = 8192</span><br><span class="line">innodb_buffer_pool_size = 512M</span><br><span class="line">character-set-server=utf8</span><br><span class="line">log_bin</span><br><span class="line"><span class="comment"># 服务器编号</span></span><br><span class="line">server_id = 2</span><br><span class="line"><span class="comment"># 开启gtid</span></span><br><span class="line">gtid-mode=ON</span><br><span class="line">enforce-gtid-consistency=ON</span><br><span class="line"></span><br><span class="line">log_slave_updates=ON</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>slave服务器的二进制日志可开启或者不开启</p><p><img src="../images/37e3ac3762d1041c79fbb701864e4d74.png"></p><h6 id="2-在slave服务器上导入备份"><a href="#2-在slave服务器上导入备份" class="headerlink" title="2.在slave服务器上导入备份"></a>2.在slave服务器上导入备份</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mysql -uroot -p&#x27;wp123456&#x27; &lt;all.sql</span></span><br><span class="line">mysql: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br></pre></td></tr></table></figure><h6 id="3-查看配置slave的相关信息"><a href="#3-查看配置slave的相关信息" class="headerlink" title="3.查看配置slave的相关信息"></a>3.查看配置slave的相关信息</h6><ul><li>查看二进制日志文件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@(none) 13:28  mysql&gt;show master status;</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File                 | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| localhost-bin.000005 |    38028 |              |                  |                   |</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>查看端口号 </li></ul><p>在mysql里使用system + command(linux)查看</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@(none) 12:34  mysql&gt;system lsof -i:3306</span><br><span class="line">COMMAND    PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">mysqld  106388 mysql   36u  IPv6 548819      0t0  TCP *:mysql (LISTEN)</span><br></pre></td></tr></table></figure><h6 id="4-slave上启用master的信息"><a href="#4-slave上启用master的信息" class="headerlink" title="4.slave上启用master的信息"></a>4.slave上启用master的信息</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CHANGE MASTER <span class="keyword">TO</span> MASTER_HOST<span class="operator">=</span><span class="string">&#x27;192.168.186.139&#x27;</span>,</span><br><span class="line">MASTER_USER<span class="operator">=</span><span class="string">&#x27;slave&#x27;</span>,</span><br><span class="line">MASTER_PASSWORD<span class="operator">=</span><span class="string">&#x27;wp123456&#x27;</span>,</span><br><span class="line">MASTER_PORT<span class="operator">=</span><span class="number">3306</span>,</span><br><span class="line">MASTER_LOG_FILE<span class="operator">=</span><span class="string">&#x27;localhost-bin.000005&#x27;</span>,</span><br><span class="line">MASTER_LOG_POS<span class="operator">=</span><span class="number">38028</span>;</span><br></pre></td></tr></table></figure><p>MASTER_USER是先前创建获取二进制日志文件的用户</p><p>MASTER_PASSWORD是先前创建获取二进制日志文件的用户的密码</p><p>MASTER_PORT端口号</p><p>MASTER_LOG_FILE二进制日志文件名</p><p>MASTER_LOG_POS位置号<br><br></p><ul><li>可能出现的错误：</li></ul><p>1.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;CHANGE MASTER TO MASTER_HOST=&#x27;</span><span class="number">192.168</span><span class="number">.186</span><span class="number">.139</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">MASTER_USER=&#x27;</span>slave<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">MASTER_P&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;解决方法</p><p>&nbsp;&nbsp;&nbsp;可以使用下列语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CHANGE MASTER <span class="keyword">TO</span></span><br><span class="line">MASTER_HOST<span class="operator">=</span><span class="string">&#x27;192.168.186.139&#x27;</span>,</span><br><span class="line">MASTER_USER<span class="operator">=</span><span class="string">&#x27;slave&#x27;</span>,</span><br><span class="line">MASTER_PASSWORD<span class="operator">=</span><span class="string">&#x27;wp123456&#x27;</span>,</span><br><span class="line">MASTER_LOG_FILE<span class="operator">=</span><span class="string">&#x27;localhost-bin.000005&#x27;</span>,</span><br><span class="line">MASTER_LOG_POS<span class="operator">=</span><span class="number">38028</span>;</span><br></pre></td></tr></table></figure><p>2.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="number">1794</span> (HY000): Slave <span class="keyword">is</span> <span class="keyword">not</span> configured <span class="keyword">or</span> failed <span class="keyword">to</span> initialize properly. You must <span class="keyword">at</span> least <span class="keyword">set</span> <span class="comment">--server-id to enable either a master or a slave. Additional error messages can be found in the MySQL error log.</span></span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;解决方法</p><p>&nbsp;&nbsp;&nbsp;1.drop 备份的 ibd表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> slave_master_info; </span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> slave_relay_log_info; </span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> slave_worker_info; </span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> innodb_index_stats; </span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> innodb_table_stats;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;2.重建</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> source <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>share<span class="operator">/</span>mysql_system_tables.sql</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;3.重启数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@localhost</span> <span class="operator">~</span>]# service mysql restart</span><br><span class="line">Redirecting <span class="keyword">to</span> <span class="operator">/</span>bin<span class="operator">/</span>systemctl restart mysql.service</span><br></pre></td></tr></table></figure><h6 id="5-在slave上关闭防火墙和selinux"><a href="#5-在slave上关闭防火墙和selinux" class="headerlink" title="5.在slave上关闭防火墙和selinux"></a>5.在slave上关闭防火墙和selinux</h6><ul><li>关闭防火墙</li></ul><p>&nbsp;&nbsp;&nbsp;临时关闭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service firewalld stop</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;永久关闭</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@localhost</span> backup]# systemctl disable firewalld</span><br></pre></td></tr></table></figure><ul><li>关闭selinux</li></ul><p>&nbsp;&nbsp;&nbsp;临时关闭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> enforcing 0</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;永久关闭</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@localhost</span> backup]# vim <span class="operator">/</span>etc<span class="operator">/</span>selinux<span class="operator">/</span>config</span><br></pre></td></tr></table></figure><p><img src="../images/e36998b1e91e59ae5e56119c5838a8e8.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210404204230.png"></p><h6 id="6-查看slave状态"><a href="#6-查看slave状态" class="headerlink" title="6.查看slave状态"></a>6.查看slave状态</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;show slave status\G;</span><br></pre></td></tr></table></figure><p><img src="../images/c524f7ab6ec226e19a9a7823ae133c5d.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210404204501.png"></p><h6 id="7-开启slave线程"><a href="#7-开启slave线程" class="headerlink" title="7.开启slave线程"></a>7.开启slave线程</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;start slave;</span><br></pre></td></tr></table></figure><h6 id="8-验证启动效果"><a href="#8-验证启动效果" class="headerlink" title="8.验证启动效果"></a>8.验证启动效果</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">show</span> slave status\G;</span><br></pre></td></tr></table></figure><p><img src="../images/3fd8e57bdcce1012e5337b626e867bb4.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210404204555.png"></p><h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><p>关闭slave服务</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@mysql</span> <span class="number">22</span>:<span class="number">29</span>  mysql<span class="operator">&gt;</span>stop slave;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.38</span> sec)</span><br></pre></td></tr></table></figure><p>slave清除master的信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">22</span>:<span class="number">40</span>  mysql<span class="operator">&gt;</span>reset master;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><p>配置文件信息</p><ul><li>临时</li></ul><p>master配置</p><ul><li>永久</li></ul><p>master配置</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">socket<span class="operator">=</span><span class="operator">/</span>data<span class="operator">/</span>mysql<span class="operator">/</span>mysql.sock</span><br><span class="line">port <span class="operator">=</span> <span class="number">3306</span></span><br><span class="line">open_files_limit <span class="operator">=</span> <span class="number">8192</span></span><br><span class="line">innodb_buffer_pool_size <span class="operator">=</span> <span class="number">512</span>M</span><br><span class="line"><span class="type">character</span><span class="operator">-</span><span class="keyword">set</span><span class="operator">-</span>server<span class="operator">=</span>utf8</span><br><span class="line">slow_query_log<span class="operator">=</span><span class="number">1</span></span><br><span class="line">long_query_time <span class="operator">=</span> <span class="number">0.001</span></span><br><span class="line">general_log</span><br><span class="line"># 开启二进制日志</span><br><span class="line">log_bin</span><br><span class="line"># 指定二进制日志名称前缀</span><br><span class="line">log<span class="operator">-</span>bin<span class="operator">=</span>mysql<span class="operator">-</span>bin</span><br><span class="line"># 服务器的编号</span><br><span class="line">server_id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"># 开启gtid</span><br><span class="line">gtid<span class="operator">-</span>mode<span class="operator">=</span><span class="keyword">ON</span></span><br><span class="line">enforce<span class="operator">-</span>gtid<span class="operator">-</span>consistency<span class="operator">=</span><span class="keyword">ON</span></span><br></pre></td></tr></table></figure><p><strong>enforce_gtid_consistency 保证GTID安全的参数强制gtid一致性，开启后对于特定create table不被支持</strong></p><p>slave配置</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">socket<span class="operator">=</span><span class="operator">/</span>data<span class="operator">/</span>mysql<span class="operator">/</span>mysql.sock</span><br><span class="line">port <span class="operator">=</span> <span class="number">3306</span></span><br><span class="line">open_files_limit <span class="operator">=</span> <span class="number">8192</span></span><br><span class="line">innodb_buffer_pool_size <span class="operator">=</span> <span class="number">512</span>M</span><br><span class="line"><span class="type">character</span><span class="operator">-</span><span class="keyword">set</span><span class="operator">-</span>server<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"># 二进制日志</span><br><span class="line">log_bin</span><br><span class="line"></span><br><span class="line"># 服务器编号</span><br><span class="line">server_id <span class="operator">=</span> <span class="number">3</span></span><br><span class="line">log<span class="operator">-</span>bin<span class="operator">=</span>mysql<span class="operator">-</span>bin</span><br><span class="line"></span><br><span class="line"># gtid</span><br><span class="line">gtid<span class="operator">-</span>mode<span class="operator">=</span><span class="keyword">ON</span></span><br><span class="line">enforce<span class="operator">-</span>gtid<span class="operator">-</span>consistency<span class="operator">=</span><span class="keyword">ON</span></span><br><span class="line">log_slave_updates<span class="operator">=</span><span class="keyword">ON</span></span><br></pre></td></tr></table></figure><p>log_slave_updates=ON</p><p>master和slave都重启mysql服务</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@localhost</span> <span class="operator">/</span>]# service mysqld restart</span><br><span class="line">Shutting down MySQL.... SUCCESS<span class="operator">!</span> </span><br><span class="line">Starting MySQL... SUCCESS<span class="operator">!</span></span><br></pre></td></tr></table></figure><p><strong>开启gtid</strong></p><p>master创建授权复制的用户</p><p>新建用户</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">11</span>:<span class="number">47</span>  mysql<span class="operator">&gt;</span><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;wp123456&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>授权</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">11</span>:<span class="number">49</span>  mysql<span class="operator">&gt;</span><span class="keyword">grant</span> replication slave <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>slave配置master信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CHANGE MASTER <span class="keyword">TO</span></span><br><span class="line">MASTER_HOST<span class="operator">=</span><span class="string">&#x27;192.168.186.128&#x27;</span>,</span><br><span class="line">MASTER_USER<span class="operator">=</span><span class="string">&#x27;slave&#x27;</span>,</span><br><span class="line">MASTER_PASSWORD<span class="operator">=</span><span class="string">&#x27;wp123456&#x27;</span>,</span><br><span class="line">MASTER_PORT<span class="operator">=</span><span class="number">3306</span>,</span><br><span class="line">MASTER_AUTO_POSITION<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>slave服务器开启slave</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">start</span> slave；</span><br></pre></td></tr></table></figure><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><p>查看开启状态</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">14</span>:<span class="number">02</span>  mysql<span class="operator">&gt;</span><span class="keyword">show</span> slave status\G;</span><br></pre></td></tr></table></figure><p><img src="../images/9fedfdc86d1d54792cc4eb22d673caf2.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210408140444.png"></p><p><img src="../images/73ce1b122209781639c7383066fb826d.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210408140621.png"></p><p>查看master的情况，对比master和slave的gtid号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">14</span>:<span class="number">04</span>  mysql<span class="operator">&gt;</span><span class="keyword">show</span> master status;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+--------------+------------------+------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> File                 <span class="operator">|</span> Position <span class="operator">|</span> Binlog_Do_DB <span class="operator">|</span> Binlog_Ignore_DB <span class="operator">|</span> Executed_Gtid_Set                        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+--------------+------------------+------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> localhost<span class="operator">-</span>bin<span class="number">.000009</span> <span class="operator">|</span>      <span class="number">194</span> <span class="operator">|</span>              <span class="operator">|</span>                  <span class="operator">|</span> b5115b39<span class="number">-88</span>bf<span class="number">-11</span>eb<span class="operator">-</span>afb0<span class="number">-000</span>c292a5af9:<span class="number">1</span><span class="number">-7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+--------------+------------------+------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>验证主从数据是否一致</p><p>master</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">14</span>:<span class="number">27</span>  mysql<span class="operator">&gt;</span><span class="keyword">create</span> database test1;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">1.09</span> sec)</span><br><span class="line"></span><br><span class="line">root@(<span class="keyword">none</span>) <span class="number">14</span>:<span class="number">27</span>  mysql<span class="operator">&gt;</span><span class="keyword">show</span> master status;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+--------------+------------------+------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> File                 <span class="operator">|</span> Position <span class="operator">|</span> Binlog_Do_DB <span class="operator">|</span> Binlog_Ignore_DB <span class="operator">|</span> Executed_Gtid_Set                        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+--------------+------------------+------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> localhost<span class="operator">-</span>bin<span class="number">.000009</span> <span class="operator">|</span>      <span class="number">356</span> <span class="operator">|</span>              <span class="operator">|</span>                  <span class="operator">|</span> b5115b39<span class="number">-88</span>bf<span class="number">-11</span>eb<span class="operator">-</span>afb0<span class="number">-000</span>c292a5af9:<span class="number">1</span><span class="number">-8</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+--------------+------------------+------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>slave</p><p>查看databases</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">14</span>:<span class="number">29</span>  mysql<span class="operator">&gt;</span><span class="keyword">show</span> databases;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Database           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> information_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TENNIS             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> backup             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> game               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> performance_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sanchuang          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sanchuang123       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sys                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> test               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> test01             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> test1              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> w                  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> wp                 <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> wxj                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">15</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>查看slave status</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@(<span class="keyword">none</span>) <span class="number">14</span>:<span class="number">29</span>  mysql<span class="operator">&gt;</span><span class="keyword">show</span> slave status\G;</span><br><span class="line"> Retrieved_Gtid_Set: b5115b39<span class="number">-88</span>bf<span class="number">-11</span>eb<span class="operator">-</span>afb0<span class="number">-000</span>c292a5af9:<span class="number">1</span><span class="number">-8</span></span><br><span class="line">            Executed_Gtid_Set: b5115b39<span class="number">-88</span>bf<span class="number">-11</span>eb<span class="operator">-</span>afb0<span class="number">-000</span>c292a5af9:<span class="number">1</span><span class="number">-8</span></span><br><span class="line">                Auto_Position: <span class="number">1</span></span><br><span class="line">         Replicate_Rewrite_DB: </span><br><span class="line">                 Channel_Name: </span><br><span class="line">           Master_TLS_Version: </span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h2 id="错误排查"><a href="#错误排查" class="headerlink" title="错误排查"></a>错误排查</h2><ul><li><p>mysql服务不能启动</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@master</span> mysql]# service mysqld restart</span><br><span class="line"> ERROR<span class="operator">!</span> MySQL server PID file could <span class="keyword">not</span> be found<span class="operator">!</span></span><br><span class="line">Starting MySQL.........</span><br></pre></td></tr></table></figure><p>  使用ps aux查看进程</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@master</span> mysql]# ps aux <span class="operator">|</span>grep mysqld</span><br><span class="line">root       <span class="number">1755</span>  <span class="number">0.0</span>  <span class="number">0.1</span>  <span class="number">11824</span>  <span class="number">1580</span> pts<span class="operator">/</span><span class="number">0</span>    S    <span class="number">10</span>:<span class="number">38</span>   <span class="number">0</span>:<span class="number">00</span> <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>bin<span class="operator">/</span>mysqld_safe <span class="comment">--datadir=/data/mysql --pid-file=/data/mysql/localhost.localdomain.pid</span></span><br><span class="line">mysql      <span class="number">1909</span>  <span class="number">0.0</span> <span class="number">21.3</span> <span class="number">1545108</span> <span class="number">212112</span> pts<span class="operator">/</span><span class="number">0</span>  Sl   <span class="number">10</span>:<span class="number">38</span>   <span class="number">0</span>:<span class="number">01</span> <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>bin<span class="operator">/</span>mysqld <span class="comment">--basedir=/usr/local/mysql --datadir=/data/mysql --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=localhost.localdomain.err --open-files-limit=8192 --pid-file=/data/mysql/localhost.localdomain.pid --socket=/data/mysql/mysql.sock --port=3306</span></span><br><span class="line">root       <span class="number">3747</span>  <span class="number">0.0</span>  <span class="number">0.1</span>  <span class="number">11824</span>  <span class="number">1584</span> pts<span class="operator">/</span><span class="number">0</span>    S    <span class="number">11</span>:<span class="number">28</span>   <span class="number">0</span>:<span class="number">00</span> <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>bin<span class="operator">/</span>mysqld_safe <span class="comment">--datadir=/data/mysql --pid-file=/data/mysql/master.pid</span></span><br><span class="line">mysql      <span class="number">3963</span>  <span class="number">1.4</span> <span class="number">19.2</span> <span class="number">976416</span> <span class="number">191748</span> pts<span class="operator">/</span><span class="number">0</span>   Sl   <span class="number">11</span>:<span class="number">28</span>   <span class="number">0</span>:<span class="number">00</span> <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>bin<span class="operator">/</span>mysqld <span class="comment">--basedir=/usr/local/mysql --datadir=/data/mysql --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=master.err --open-files-limit=8192 --pid-file=/data/mysql/master.pid --socket=/data/mysql/mysql.sock --port=3306</span></span><br><span class="line">root       <span class="number">3993</span>  <span class="number">0.0</span>  <span class="number">0.0</span> <span class="number">112824</span>   <span class="number">976</span> pts<span class="operator">/</span><span class="number">0</span>    R<span class="operator">+</span>   <span class="number">11</span>:<span class="number">28</span>   <span class="number">0</span>:<span class="number">00</span> grep <span class="comment">--color=auto mysqld</span></span><br></pre></td></tr></table></figure><p>  发现有两个mysqld_safe和basedir的进程在启动，找出不是自己指定PID路径的进程</p><p>  kill -9 进程号</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@master</span> mysql]# kill <span class="number">-9</span> <span class="number">1755</span></span><br><span class="line">[root<span class="variable">@master</span> mysql]# kill <span class="number">-9</span> <span class="number">1909</span></span><br></pre></td></tr></table></figure><p>  查看进程</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@master</span> mysql]# ps aux <span class="operator">|</span>grep mysqld</span><br><span class="line">root       <span class="number">3747</span>  <span class="number">0.0</span>  <span class="number">0.1</span>  <span class="number">11824</span>  <span class="number">1584</span> pts<span class="operator">/</span><span class="number">0</span>    S    <span class="number">11</span>:<span class="number">28</span>   <span class="number">0</span>:<span class="number">00</span> <span class="operator">/</span>bin<span class="operator">/</span>sh <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>bin<span class="operator">/</span>mysqld_safe <span class="comment">--datadir=/data/mysql --pid-file=/data/mysql/master.pid</span></span><br><span class="line">mysql      <span class="number">3963</span>  <span class="number">0.5</span> <span class="number">21.2</span> <span class="number">1479376</span> <span class="number">211308</span> pts<span class="operator">/</span><span class="number">0</span>  Sl   <span class="number">11</span>:<span class="number">28</span>   <span class="number">0</span>:<span class="number">00</span> <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>bin<span class="operator">/</span>mysqld <span class="comment">--basedir=/usr/local/mysql --datadir=/data/mysql --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=master.err --open-files-limit=8192 --pid-file=/data/mysql/master.pid --socket=/data/mysql/mysql.sock --port=3306</span></span><br><span class="line">root       <span class="number">4011</span>  <span class="number">0.0</span>  <span class="number">0.0</span> <span class="number">112824</span>   <span class="number">976</span> pts<span class="operator">/</span><span class="number">0</span>    R<span class="operator">+</span>   <span class="number">11</span>:<span class="number">29</span>   <span class="number">0</span>:<span class="number">00</span> grep <span class="comment">--color=auto mysqld</span></span><br></pre></td></tr></table></figure><p>  重启mysql服务</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@master</span> mysql]# service mysqld restart</span><br><span class="line">Shutting down MySQL.. SUCCESS<span class="operator">!</span> </span><br><span class="line">Starting MySQL. SUCCESS<span class="operator">!</span></span><br></pre></td></tr></table></figure></li><li><p>SQL线程没有启动</p><p>  <img src="../images/2c9f5b62e88b688393d57988c824f9e6.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210409163528.png"></p><p>  查看最后一个错误</p><p>  <img src="../images/7bcdd896a1ebe0606cb24183d6f884c5.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210409163451.png"></p><p>  <img src="../images/76cce126dbce61bc707f04675b5cacab.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210409172900.png"></p><p>  如果错误提示如上示两图，错误原因都是master和slave的数据不一致，slave服务器有数据丢失的可能，导致master所作的操作没有同步到slave上</p></li><li><p>IO线程没有开启</p><p>  <img src="../images/4062af8e485bbeae7f1e0fbfeef3e632.png" alt="https://gitee.com/wupei_w/photo/raw/master/wupei_w/photo/20210409172541.png"></p><p>  错误提醒</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Last_IO_Error: error connecting <span class="keyword">to</span> master <span class="string">&#x27;slave@192.168.186.128:3306&#x27;</span> <span class="operator">-</span> retry<span class="operator">-</span><span class="type">time</span>: <span class="number">60</span>  retries: <span class="number">1</span></span><br></pre></td></tr></table></figure><p>  此类的错误都是主库删除多余的用户名，导致从库没有此信息造成主从故障！</p><p>  解决方法</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">grant</span>  <span class="keyword">select</span> <span class="keyword">on</span> dbname <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> &quot;&#x27;select_user&#x27;&quot;@&quot;%&quot; identified <span class="keyword">by</span> &quot;123456&quot;;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> flush privileges;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> stop slave;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">start</span> slave;</span><br><span class="line"></span><br><span class="line">以上命令执行后，从库<span class="string">&#x27;select_user&#x27;</span>也会<span class="keyword">sql</span>线程也会自动删掉select_user用户，主从同步恢复正常。</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p><a href="https://blog.csdn.net/chj_1224365967/article/details/107915724">https://blog.csdn.net/chj_1224365967/article/details/107915724</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>完全备份+二进制日志备份</title>
      <link href="/2021/09/20/wan-quan-bei-fen-er-jin-zhi-ri-zhi-bei-fen/"/>
      <url>/2021/09/20/wan-quan-bei-fen-er-jin-zhi-ri-zhi-bei-fen/</url>
      
        <content type="html"><![CDATA[<h1 id="首先确保服务器开启二进制日志"><a href="#首先确保服务器开启二进制日志" class="headerlink" title="首先确保服务器开启二进制日志"></a><em><strong>首先确保服务器开启二进制日志</strong></em></h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h5 id="查看二进制文件"><a href="#查看二进制文件" class="headerlink" title="查看二进制文件"></a>查看二进制文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># ls</span></span><br><span class="line">auto.cnf         client-key.pem  ib_logfile1           localhost-bin.000004       localhost-slow.log  private_key.pem  server-key.pem  wp</span><br><span class="line">backup           game            ibtmp1                localhost-bin.index        mysql               public_key.pem   sys             wxj</span><br><span class="line">ca-key.pem       ib_buffer_pool  localhost-bin.000001  localhost.localdomain.err  mysql.sock          sanchuang        TENNIS</span><br><span class="line">ca.pem           ibdata1         localhost-bin.000002  localhost.localdomain.pid  mysql.sock.lock     sanchuang123     <span class="built_in">test</span></span><br><span class="line">client-cert.pem  ib_logfile0     localhost-bin.000003  localhost.log              performance_schema  server-cert.pem  w</span><br><span class="line">[root@localhost mysql]<span class="comment"># mysqlbinlog localhost-bin.000004</span></span><br><span class="line">/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/;</span><br><span class="line">/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;</span><br><span class="line">DELIMITER /*!*/;</span><br><span class="line"><span class="comment"># at 4</span></span><br><span class="line"><span class="comment">#210401 17:02:45 server id 1  end_log_pos 123 CRC32 0xa84b7737 Start: binlog v 4, server v 5.7.33-log created 210401 17:02:45</span></span><br><span class="line"><span class="comment"># Warning: this binlog is either in use or was not closed properly.</span></span><br><span class="line">BINLOG <span class="string">&#x27;</span></span><br><span class="line"><span class="string">NYxlYA8BAAAAdwAAAHsAAAABAAQANS43LjMzLWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</span></span><br><span class="line"><span class="string">AAAAAAAAAAAAAAAAAAAAAAAAEzgNAAgAEgAEBAQEEgAAXwAEGggAAAAICAgCAAAACgoKKioAEjQA</span></span><br><span class="line"><span class="string">ATd3S6g=</span></span><br><span class="line"><span class="string">&#x27;</span>/*!*/;</span><br><span class="line"><span class="comment"># at 123</span></span><br><span class="line"><span class="comment">#210401 17:02:45 server id 1  end_log_pos 154 CRC32 0x3d6a0e33 Previous-GTIDs</span></span><br><span class="line"><span class="comment"># [empty]</span></span><br><span class="line">SET @@SESSION.GTID_NEXT= <span class="string">&#x27;AUTOMATIC&#x27;</span> /* added by mysqlbinlog */ /*!*/;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="comment"># End of log file</span></span><br><span class="line">/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;</span><br><span class="line">/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/;</span><br></pre></td></tr></table></figure><h5 id="查看位置"><a href="#查看位置" class="headerlink" title="查看位置"></a>查看位置</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@(none) 20:53  mysql&gt;show master status;</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File                 | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| localhost-bin.000004 |      154 |              |                  |                   |</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="1-创建完全备份"><a href="#1-创建完全备份" class="headerlink" title="1.创建完全备份"></a>1.创建完全备份</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># mysqldump -uroot -p&#x27;wp123456&#x27; --databases wp &gt;/backup/wp.sql</span></span><br><span class="line">mysqldump: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br></pre></td></tr></table></figure><h3 id="2-模拟数据发生变化"><a href="#2-模拟数据发生变化" class="headerlink" title="2.模拟数据发生变化"></a>2.模拟数据发生变化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">root@(none) 20:53  mysql&gt;show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| wp                 |</span><br><span class="line">+--------------------+</span><br><span class="line">root@game 21:01  mysql&gt;use wp;</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">root@wp 21:02  mysql&gt;insert into trans_demo(id,name) values(4,<span class="string">&#x27;lisa&#x27;</span>);</span><br><span class="line">Query OK, 1 row affected (0.53 sec)</span><br><span class="line"></span><br><span class="line">root@wp 21:03  mysql&gt;insert into trans_demo(id,name) values(5,<span class="string">&#x27;jack&#x27;</span>);</span><br><span class="line">Query OK, 1 row affected (0.11 sec)</span><br></pre></td></tr></table></figure><h3 id="3-查看位置号"><a href="#3-查看位置号" class="headerlink" title="3.查看位置号"></a>3.查看位置号</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@wp 21:03  mysql&gt;show master status;</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File                 | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| localhost-bin.000004 |      154 |              |                  |                   |</span><br><span class="line">+----------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.09 sec)</span><br></pre></td></tr></table></figure><h3 id="4-模拟出现意外，数据库数据丢失"><a href="#4-模拟出现意外，数据库数据丢失" class="headerlink" title="4.模拟出现意外，数据库数据丢失"></a>4.模拟出现意外，数据库数据丢失</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@wp 21:05  mysql&gt;drop database wp;</span><br><span class="line">Query OK, 3 rows affected (1.21 sec)</span><br></pre></td></tr></table></figure><h5 id="查看数据库，确认库已被删除"><a href="#查看数据库，确认库已被删除" class="headerlink" title="查看数据库，确认库已被删除"></a>查看数据库，确认库已被删除</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@(none) 21:06  mysql&gt;show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema | </span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">|                    |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure><h3 id="5-恢复数据"><a href="#5-恢复数据" class="headerlink" title="5.恢复数据"></a>5.恢复数据</h3><ul><li>恢复完全备份</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># mysql -uroot -p&#x27;wp123456&#x27; &lt;/backup/wp.sql</span></span><br><span class="line">mysql: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br></pre></td></tr></table></figure><p>此时的数据还没有完全恢复</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@wp 21:38  mysql&gt;select * from trans_demo;</span><br><span class="line">+------+------+</span><br><span class="line">| id   | name |</span><br><span class="line">+------+------+</span><br><span class="line">|    3 | cali |</span><br><span class="line">|    1 | bob  |</span><br><span class="line">|    2 | ROSE |</span><br><span class="line">+------+------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>二进制日志恢复数据</li></ul><ol><li><p>通过位置点恢复</p><p> 查看二进制日志关于drop数据库的部分</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># mysqlbinlog localhost-bin.000004|egrep -C 5 &#x27;drop database&#x27;</span></span><br><span class="line"><span class="comment">#210401 21:06:44 server id 1  end_log_pos 749 CRC32 0x4232993e Anonymous_GTIDlast_committed=2sequence_number=3rbr_only=no</span></span><br><span class="line">SET @@SESSION.GTID_NEXT= <span class="string">&#x27;ANONYMOUS&#x27;</span>/*!*/;</span><br><span class="line"><span class="comment"># at 749</span></span><br><span class="line"><span class="comment">#210401 21:06:44 server id 1  end_log_pos 835 CRC32 0x39092363 Querythread_id=60exnec_time=1error_code=0</span></span><br><span class="line">SET TIMESTAMP=1617282404/*!*/;</span><br><span class="line">drop database wp</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 835</span></span><br><span class="line"><span class="comment">#210401 21:35:54 server id 1  end_log_pos 900 CRC32 0x8ebec48f Anonymous_GTIDlast_committed=3sequence_number=4rbr_only=no</span></span><br><span class="line">SET @@SESSION.GTID_NEXT= <span class="string">&#x27;ANONYMOUS&#x27;</span>/*!*/;</span><br><span class="line"><span class="comment"># at 900</span></span><br></pre></td></tr></table></figure><p> 获得drop数据的位置点</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># at 749</span></span><br><span class="line"><span class="comment">#210401 21:06:44 server id 1  end_log_pos 835 CRC32 0x39092363 Querythread_id=60exec_time=1error_code=0</span></span><br><span class="line">SET TIMESTAMP=1617282404/*!*/;</span><br><span class="line">drop database wp</span><br></pre></td></tr></table></figure><p> 位置点为 # at 749</p><p> 恢复</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># mysqlbinlog --start-position=154 --stop-position=749 localhost-bin.000004 |mysql -uroot -p&#x27;wp123456&#x27;</span></span><br><span class="line">mysql: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br></pre></td></tr></table></figure><p> 恢复成功</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@wp 21:49  mysql&gt;select * from trans_demo;</span><br><span class="line">+------+------+</span><br><span class="line">| id   | name |</span><br><span class="line">+------+------+</span><br><span class="line">|    3 | cali |</span><br><span class="line">|    1 | bob  |</span><br><span class="line">|    2 | ROSE |</span><br><span class="line">|    4 | lisa |</span><br><span class="line">|    5 | jack |</span><br><span class="line">+------+------+</span><br><span class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></li><li><p>通过时间来恢复</p><p> 查看二进制日志关于drop数据库的部分</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># mysqlbinlog localhost-bin.000004|egrep -C 5 &#x27;drop database&#x27;</span></span><br><span class="line"><span class="comment"># at 31294</span></span><br><span class="line"><span class="comment">#210402 13:01:12 server id 1  end_log_pos 31380 CRC32 0xae8350ad Querythread_id=77exec_time=0error_code=0</span></span><br><span class="line">SET TIMESTAMP=1617339672/*!*/;</span><br><span class="line">SET @@session.pseudo_thread_id=77/*!*/;</span><br><span class="line">SET @@session.sql_mode=1436549152/*!*/;</span><br><span class="line">drop database wp</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 31380</span></span><br><span class="line"><span class="comment">#210403 16:20:54 server id 1  end_log_pos 31431 CRC32 0xb277e494 Rotate to localhost-bin.000005  pos: 4</span></span><br><span class="line">SET @@SESSION.GTID_NEXT= <span class="string">&#x27;AUTOMATIC&#x27;</span> /* added by mysqlbinlog */ /*!*/;</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><ul><li>获得drop数据的时间点</li></ul> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#210402 13:01:12</span></span><br></pre></td></tr></table></figure><p> 通过时间点恢复</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># mysqlbinlog  --stop-datetime=&#x27;2021-04-02 13:01:12&#x27; localhost-bin.000004|mysql -uroot -p&#x27;wp123456&#x27;</span></span><br><span class="line">mysql: [Warning] Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br></pre></td></tr></table></figure><p> 恢复成功</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@wp 16:24  mysql&gt;select * from trans_demo;</span><br><span class="line">+------+------+</span><br><span class="line">| id   | name |</span><br><span class="line">+------+------+</span><br><span class="line">|    3 | cali |</span><br><span class="line">|    1 | bob  |</span><br><span class="line">|    2 | ROSE |</span><br><span class="line">|    4 | lisa |</span><br><span class="line">|    5 | jack |</span><br><span class="line">+------+------+</span><br><span class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何解决centos8下载速度慢</title>
      <link href="/2021/09/19/ru-he-jie-jue-centos8-xia-zai-su-du-man/"/>
      <url>/2021/09/19/ru-he-jie-jue-centos8-xia-zai-su-du-man/</url>
      
        <content type="html"><![CDATA[<h1 id="如何解决centos8下载速度慢"><a href="#如何解决centos8下载速度慢" class="headerlink" title="如何解决centos8下载速度慢"></a>如何解决centos8下载速度慢</h1><h2 id="原因分析："><a href="#原因分析：" class="headerlink" title="原因分析："></a>原因分析：</h2><p>由于yum源的镜像在国外，所以导致国内的下载速度偏慢，使用国内的镜像即可解决此问题。<br>1</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>1.<code>cd /etc/yum.repos.d </code>进入yum源目录</p><p><code>mkdir backup </code>建立备份目录</p><p>2.<code>mv *.repo backup/</code>备份原有的镜像，目的是存放linux系统默认的repo文件，让yum找不到默认的仓库文件</p><p>3.<code>curl -O https://mirrors.aliyun.com/repo/Centos-8.repo </code>下载镜像，此为centos8的镜像<br>Centos5 <a href="https://mirrors.aliyun.com/repo/Centos-5.repo">https://mirrors.aliyun.com/repo/Centos-5.repo</a><br>Centos6 <a href="https://mirrors.aliyun.com/repo/Centos-6.repo">https://mirrors.aliyun.com/repo/Centos-6.repo</a><br>Centos7 <a href="https://mirrors.aliyun.com/repo/Centos-7.repo">https://mirrors.aliyun.com/repo/Centos-7.repo</a><br>Centos8 <a href="https://mirrors.aliyun.com/repo/Centos-8.repo">https://mirrors.aliyun.com/repo/Centos-8.repo</a></p><p>4.<code>yum install go -y</code>下载</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
